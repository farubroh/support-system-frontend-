<div class="container" [@fadeIn]>
  <h2> Admin Issue Dashboard</h2>
  <p>
    Welcome, <strong>{{user.username}}</strong> | Role:
    <strong>{{user.role}}</strong>
  </p>

  <div class="tabs">
    <button
      *ngFor="let tab of statusTabs"
      (click)="onTabClick(tab.key)"
      [class.active]="activeTab === tab.key"
    >
      {{ tab.label }}
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    ðŸ”„ Loading {{activeTab | lowercase}} issues...
  </div>

  <div *ngIf="!loading" class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Serial ID</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let issue of issues; index as i"
          [class.stripe]="i % 2 === 0"
        >
          <td>{{ i + 1 }}</td>
          <td>{{ issue.serialId }}</td>
          <td>
            <span
              class="badge"
              [ngStyle]="{ 'background-color': getStatusColor(issue.status) }"
            >
              {{ issue.status }}
            </span>
          </td>
          <td>
            <button class="btn-view" (click)="openModal(issue)">View</button>
          </td>
        </tr>
        <tr *ngIf="issues.length === 0">
          <td colspan="4">No {{activeTab | lowercase}} issues found.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <app-issue-view-modal-admin
    *ngIf="selectedIssue"
    [issue]="selectedIssue"
    (close)="closeModal()"
  ></app-issue-view-modal-admin>
</div>
